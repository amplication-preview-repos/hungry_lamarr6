datasource db {
  provider = "mysql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Federation {
  id                 String        @id @default(cuid())
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt
  affectationDomaine String?
  structure          Structure     @relation(fields: [structureId], references: [id])
  structureId        String        @unique
  associations       Association[]
}

model Association {
  id           String      @id @default(cuid())
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  structure    Structure   @relation(fields: [structureId], references: [id])
  structureId  String      @unique
  federation   Federation? @relation(fields: [federationId], references: [id])
  federationId String?
  agences      Agence[]
}

model Agence {
  id            String       @id @default(cuid())
  createdAt     DateTime     @default(now())
  updatedAt     DateTime     @updatedAt
  structure     Structure    @relation(fields: [structureId], references: [id])
  structureId   String       @unique
  association   Association? @relation(fields: [associationId], references: [id])
  associationId String?
}

model Utilisateur {
  id         String      @id @default(cuid())
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
  structures Structure[]
}

model Affectation {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Structure {
  id                 String       @id @default(cuid())
  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt
  code               String?
  affectationDomaine String?
  federation         Federation?
  association        Association?
  agence             Agence?
  libelle            String?
  utilisateur        Utilisateur? @relation(fields: [utilisateurId], references: [id])
  utilisateurId      String?
}

model EnumStructureTypeField {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
